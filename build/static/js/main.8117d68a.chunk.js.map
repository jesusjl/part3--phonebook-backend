{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notifications.js","components/ErrorNotification.js","services/Phones.js","App.js","index.js"],"names":["Filter","value","onChange","PersonForm","props","onSubmit","valueName","onChangePerson","valuePhone","onChangePhone","type","Persons","person","onClick","name","number","Notification","message","console","log","className","ErrorNotification","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","App","useState","persons","setPersons","newName","setNewName","newPhone","setNewPhone","filterNames","setFilterNames","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","phoneService","initialPhones","startsWithLetters","filter","toUpperCase","startsWith","event","target","preventDefault","find","alert","window","confirm","changedPersonPhone","returnedPerson","map","setTimeout","catch","error","returnedPhone","concat","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8117d68a.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({value, onChange}) => {\n    return (\n        <div>\n        filter show with \n        <input value={value} onChange={onChange}/>\n        </div>\n    )\n}\n\nexport default Filter","import React from \"react\";\n\nconst PersonForm = (props) => {\n    return (\n        <div>\n            <form onSubmit={props.onSubmit}>\n                <div>\n                    name: <input value={props.valueName}  onChange={props.onChangePerson}/>\n                </div>\n                <div>\n                    number: <input value={props.valuePhone}  onChange={props.onChangePhone} />\n                </div>\n                <div>\n                    <button type='submit'>Add</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default PersonForm","import React from \"react\";\n\nconst Persons = ({person, onClick}) => {\n\n    return (\n    <div>\n        {person.name} {person.number} <button onClick={onClick}>delete</button>\n    </div>\n    )\n}\n\nexport default Persons","import React from 'react'\n\nconst Notification = ({message}) => {\n    console.log(message)\n    if(message === null) {\n        return null\n    }\n\n    return (\n        <div className='success'>{message}</div>\n    )\n}\n\nexport default Notification","import React from 'react'\n\nconst ErrorNotification = ({message}) => {\n    console.log(message)\n    if(message === null) {\n        \n        return null\n    }\n\n    return (\n        <div className='error'>{message}</div>\n    )\n}\n\nexport default ErrorNotification","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => axios.get(baseUrl).then(response => response.data)\n\nconst create = (newObject) => axios.post(baseUrl, newObject).then(response => response.data)\n\nconst deletePerson = (id) => axios.delete(`${baseUrl}/${id}`).then(response => response.data)\n\nconst update = (id, newObject) => axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\n\n    \nexport default {getAll, create, deletePerson, update}","import React, {useState, useEffect} from 'react'\n\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notifications'\nimport ErrorNotification from './components/ErrorNotification'\nimport phoneService from './services/Phones'\n\nimport './index.css'\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newPhone, setNewPhone] = useState('')\n  const [filterNames, setFilterNames] = useState('')\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(()=> {\n    phoneService\n      .getAll()\n      .then(initialPhones=> {\n        //initialPhones = initialPhones.concat({name: 'Pepe', number: 2343443})\n        setPersons(initialPhones)\n      })\n    }, [])\n\n  const addUpdatePerson = (event) => {\n\n    event.preventDefault()\n    \n    if (persons.find(person => person.name === newName &  person.number === newPhone)){\n      alert(`${newName} is already added to phonebook`)\n    } else if (persons.find(person => person.name === newName &  person.number !== newPhone)) {\n        const person = persons.find(person => person.name === newName &  person.number !== newPhone)\n        console.log(person)\n        const response = window.confirm(`${person.name} is already added to the notebook, replace the old number with a new one?`)\n        console.log(response)\n        if(response) {\n          console.log('Response', response)\n          const changedPersonPhone = { ...person, number: newPhone }\n          console.log('changedPersonPhone', changedPersonPhone)\n          phoneService\n            .update(changedPersonPhone.id, changedPersonPhone)\n            .then(returnedPerson => {\n              console.log('returnedPerson', returnedPerson)\n              setPersons(persons.map(person => person.id !== returnedPerson.id ? person : returnedPerson))\n              setSuccessMessage(`Updated '${changedPersonPhone.name}' phone to '${changedPersonPhone.number}'`)\n              setTimeout(()=> {\n                setSuccessMessage(null)\n              }, 5000)\n            })\n            .catch(error => {\n              setErrorMessage(error.response.data.error)\n              setTimeout(()=> {\n                setErrorMessage(null)\n              }, 5000)\n            })\n        }\n      } else {\n      const personObject = {\n        name : newName,\n        number: newPhone\n      }\n\n      phoneService\n        .create(personObject)\n        .then(returnedPhone => {\n          setPersons(persons.concat(returnedPhone))\n          setNewPhone('')\n          setNewName('')\n          setSuccessMessage(`Added '${returnedPhone.name}'`)\n          setTimeout(()=> {\n            setSuccessMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          console.log(error.response.data.error)\n          setErrorMessage(error.response.data.error)\n          setTimeout(()=> {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleDeletePerson = (id) => {\n    const response = window.confirm(\"Are you sure?\")\n    if(response) {\n      phoneService\n        .deletePerson(id)\n        .then(deletedPerson => {\n          setPersons(persons.filter(person => person.id !== id))\n        })\n        .catch(error => {\n          setErrorMessage('Error: the person has already been deleted from the database', error.message)\n          setPersons(persons.filter(person => person.id !== id))\n          setTimeout(()=> {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    } \n  }\n\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handlePhoneChange = (event) => {\n    setNewPhone(event.target.value)\n  }\n\n  const handleFilterByPersonChange = (event) => {\n    setFilterNames(event.target.value)\n  }\n\n\n\n  const startsWithLetters = filterNames === ''\n    ? persons\n    : persons.filter((person) => person.name.toUpperCase().startsWith(filterNames.toUpperCase()))\n\n    return (\n      <div>\n        <h2>Phonebook</h2>\n          <Notification message={successMessage} />\n          <ErrorNotification message={errorMessage} />\n          <Filter value = {filterNames} onChange={handleFilterByPersonChange} />\n          <PersonForm onSubmit = {addUpdatePerson} \n                      valueName={newName} \n                      onChangePerson={handlePersonChange}\n                      valuePhone={newPhone}\n                      onChangePhone={handlePhoneChange} />\n\n        <h2>Numbers</h2>\n      \n        {startsWithLetters.map((person) => \n          <Persons key={person.id} person={person} onClick={() => handleDeletePerson(person.id)}/>)}\n      </div>\n    )\n}\n\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}